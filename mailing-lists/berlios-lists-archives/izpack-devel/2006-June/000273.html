<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [izpack-devel] Problems with VM 1.5
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:izpack-devel%40lists.berlios.de?Subject=%5Bizpack-devel%5D%20Problems%20with%20VM%201.5&In-Reply-To=">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000271.html">
   <LINK REL="Next"  HREF="000274.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[izpack-devel] Problems with VM 1.5</H1>
    <B>Bartz, Klaus</B> 
    <A HREF="mailto:izpack-devel%40lists.berlios.de?Subject=%5Bizpack-devel%5D%20Problems%20with%20VM%201.5&In-Reply-To="
       TITLE="[izpack-devel] Problems with VM 1.5">Klaus.Bartz at coi.de
       </A><BR>
    <I>Fri Jun 23 08:45:25 CEST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="000271.html">[izpack-devel] Problems with VM 1.5
</A></li>
        <LI>Next message: <A HREF="000274.html">[izpack-devel] IzPack 3.9.0-preview1
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#273">[ date ]</a>
              <a href="thread.html#273">[ thread ]</a>
              <a href="subject.html#273">[ subject ]</a>
              <a href="author.html#273">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Elmar, hi all,
&gt;<i>there is nothing attached, I suppose the mailing list strips off
</I>&gt;<i>attachments.
</I>there was no attach at my last EMail :-)
I would wait until tests are ended. But now the sources of it attached.&gt;

&gt;<i>The fact that it does not just crash always or never, but just sometimes it
</I>&gt;<i>really strange. I wonder if it might have something to do with the dead
</I>
A year ago I have also made some tests. At that time I played with waiting
a little bit more on the free thread. But also crashes. Therefore I have
used an other way now. There is also a wait in the child process. This
is critical, I know. But as Chat has written in his code, how to determine the exit
of the parent process? 

&gt;<i>Perhaps a more realistic test would be to implement the test 
</I>&gt;<i>loop in a batch
</I>&gt;<i>file, so that the VM actually exits before you start the next test.
</I>&gt;<i>
</I>Of course. That's what I have done.

&gt;<i>If all else fails we still have the option of not deleting the DLL. That's a
</I>&gt;<i>bit dirty and I don't really like it, which is why I spent so much time back
</I>&gt;<i>then to come up with a solution for this problem. 
</I>
I agree. Really nice trick what you have implemented.

&gt;<i>Still, it is much better
</I>&gt;<i>than crashing and it would not be any worse than many other applications
</I>&gt;<i>that clog up the temp directory with their garbage (though I did not want to
</I>&gt;<i>be part of that crowd).
</I>
Yes.

My test results are:

OLD BEHAVIOR:
On my box ( Windows 2k, 2 GHz, 1.5 GB RAM) it crashes with
Java HotSpot(TM) Client VM (1.5.0_06-b05 mixed mode, sharing)
100% (1000 of 1000)
with Java HotSpot(TM) Client VM (1.5.0_01-b08 mixed mode)
~4% (39 of 1000)


NEW BEHAVIOR:
Tests with a changed handling of the native part in IzPack (removes the dll
in a child process after waiting some time that the parent process can exit;
Librarien.java rev. 1448 and LibraryRemover.java rev. 1449)
where made 1000 * with each VM:
Java HotSpot(TM) Client VM (1.5.0_06-b05 mixed mode, sharing)
0% (0 of 1000)
with Java HotSpot(TM) Client VM (1.5.0_01-b08 mixed mode)
0% (0 of 1000)


Cheers 

Klaus


-------------- next part --------------
A non-text attachment was scrubbed...
Name: CloseTest.zip
Type: application/x-zip-compressed
Size: 4012 bytes
Desc: CloseTest.zip
Url : <A HREF="https://lists.berlios.de/pipermail/izpack-devel/attachments/20060623/2511ec4c/attachment.bin">https://lists.berlios.de/pipermail/izpack-devel/attachments/20060623/2511ec4c/attachment.bin</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000271.html">[izpack-devel] Problems with VM 1.5
</A></li>
	<LI>Next message: <A HREF="000274.html">[izpack-devel] IzPack 3.9.0-preview1
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#273">[ date ]</a>
              <a href="thread.html#273">[ thread ]</a>
              <a href="subject.html#273">[ subject ]</a>
              <a href="author.html#273">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/izpack-devel">More information about the izpack-devel
mailing list</a><br>
</body></html>
