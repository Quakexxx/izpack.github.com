<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [izpack-devel] Custom Actions NPE, patch
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:izpack-devel%40lists.berlios.de?Subject=%5Bizpack-devel%5D%20Custom%20Actions%20NPE%2C%20patch&In-Reply-To=">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000921.html">
   <LINK REL="Next"  HREF="000919.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[izpack-devel] Custom Actions NPE, patch</H1>
    <B>Bartz, Klaus</B> 
    <A HREF="mailto:izpack-devel%40lists.berlios.de?Subject=%5Bizpack-devel%5D%20Custom%20Actions%20NPE%2C%20patch&In-Reply-To="
       TITLE="[izpack-devel] Custom Actions NPE, patch">Klaus.Bartz at coi.de
       </A><BR>
    <I>Thu Mar  8 09:44:37 CET 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000921.html">[izpack-devel] Distrubuted install.xml files ...
</A></li>
        <LI>Next message: <A HREF="000919.html">[izpack-devel] Custom Actions NPE, patch
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#918">[ date ]</a>
              <a href="thread.html#918">[ thread ]</a>
              <a href="subject.html#918">[ subject ]</a>
              <a href="author.html#918">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Scott, 

&gt;<i> 
</I>&gt;<i> Thanks, Klaus! You're the only one to reply. I found out that the 
</I>
It's my baby. Therfore support is also on me.


&gt;<i> problem occurs when the class name isn't the same as the 
</I>&gt;<i> listener name. 
</I>&gt;<i>
</I>
?? What is the listener name?? Do you mean the name of the jar file?
Yes this have to be the same. This is not only for the listener else
also for panels. It is something since many years (never seen IzPack
other), therefore we do not remember it at the first step.
May be about that I have not verified this in the compiler code.
To do it is a good way to reduce errors, therefor I will put it 
into trunk.

Cheers

Klaus


&gt;<i> -----Original Message-----
</I>&gt;<i> From: <A HREF="https://lists.berlios.de/mailman/listinfo/izpack-devel">izpack-devel-bounces at lists.berlios.de</A> 
</I>&gt;<i> [mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/izpack-devel">izpack-devel-bounces at lists.berlios.de</A>] On Behalf Of 
</I>&gt;<i> Scott Plante
</I>&gt;<i> Sent: Thursday, March 08, 2007 3:55 AM
</I>&gt;<i> To: <A HREF="https://lists.berlios.de/mailman/listinfo/izpack-devel">izpack-devel at lists.berlios.de</A>
</I>&gt;<i> Subject: [izpack-devel] Custom Actions NPE, patch
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> I discovered today that to create a custom listener you have 
</I>&gt;<i> to name the 
</I>&gt;<i> class the same as the listener. If you do not, you get a very 
</I>&gt;<i> unhelpful 
</I>&gt;<i> NullPointerException at the installer run time. I would like 
</I>&gt;<i> to propose 
</I>&gt;<i> that this patch be included in the next version. It will check, and 
</I>&gt;<i> cause an error at installer compile time if there is no 
</I>&gt;<i> matching class 
</I>&gt;<i> in the listener. This is an &quot;svn diff&quot;, if there is a better way to 
</I>&gt;<i> submit patches, please let me know.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Index: lib/com/izforge/izpack/compiler/Compiler.java
</I>&gt;<i> ===================================================================
</I>&gt;<i> --- lib/com/izforge/izpack/compiler/Compiler.java       
</I>&gt;<i> (revision 1753)
</I>&gt;<i> +++ lib/com/izforge/izpack/compiler/Compiler.java       (working copy)
</I>&gt;<i> @@ -730,6 +730,12 @@
</I>&gt;<i>          URL url = findIzPackResource(jarPath, &quot;CustomAction 
</I>&gt;<i> jar file&quot;);
</I>&gt;<i>          List filePaths = getContainedFilePaths(url);
</I>&gt;<i>          String fullClassName = getFullClassName(url, className);
</I>&gt;<i> +        if (fullClassName == null)
</I>&gt;<i> +        {
</I>&gt;<i> +          throw new CompilerException(
</I>&gt;<i> +              &quot;CustomListener class '&quot; + className + &quot;' not 
</I>&gt;<i> found in '&quot;
</I>&gt;<i> +              + url + &quot;'. The class and listener name must match&quot;);
</I>&gt;<i> +        }
</I>&gt;<i>          CustomData ca = new CustomData(fullClassName, filePaths, 
</I>&gt;<i> constraints, type);
</I>&gt;<i>          packager.addCustomJar(ca, url);
</I>&gt;<i>      }
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> -- 
</I>&gt;<i> Scott Plante, CTO
</I>&gt;<i> Insight Systems, Inc.
</I>&gt;<i> (+1) 404 873 0058 x104
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/izpack-devel">splante at insightsys.com</A>
</I>&gt;<i> <A HREF="http://zyross.com">http://zyross.com</A>
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> izpack-devel mailing list
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/izpack-devel">izpack-devel at lists.berlios.de</A> 
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/izpack-devel">https://lists.berlios.de/mailman/listinfo/izpack-devel</A>
</I>&gt;<i> 
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000921.html">[izpack-devel] Distrubuted install.xml files ...
</A></li>
	<LI>Next message: <A HREF="000919.html">[izpack-devel] Custom Actions NPE, patch
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#918">[ date ]</a>
              <a href="thread.html#918">[ thread ]</a>
              <a href="subject.html#918">[ subject ]</a>
              <a href="author.html#918">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/izpack-devel">More information about the izpack-devel
mailing list</a><br>
</body></html>
