<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [izpack-users] Automatic Uninstall or Rollback to Previous version if Any Error?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:izpack-users%40lists.berlios.de?Subject=%5Bizpack-users%5D%20Automatic%20Uninstall%20or%20Rollback%20to%20Previous%20version%20if%20Any%20Error%3F&In-Reply-To=">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000206.html">
   <LINK REL="Next"  HREF="000207.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[izpack-users] Automatic Uninstall or Rollback to Previous version if Any Error?</H1>
    <B>Miraodb</B> 
    <A HREF="mailto:izpack-users%40lists.berlios.de?Subject=%5Bizpack-users%5D%20Automatic%20Uninstall%20or%20Rollback%20to%20Previous%20version%20if%20Any%20Error%3F&In-Reply-To="
       TITLE="[izpack-users] Automatic Uninstall or Rollback to Previous version if Any Error?">miraodb at hotmail.com
       </A><BR>
    <I>Mon Feb 20 15:36:16 CET 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="000206.html">[izpack-users] Automatic Uninstall or Rollback to Previous version if Any Error?
</A></li>
        <LI>Next message: <A HREF="000207.html">[izpack-users] Passing INSTALL_PATH to a text file
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#218">[ date ]</a>
              <a href="thread.html#218">[ thread ]</a>
              <a href="subject.html#218">[ subject ]</a>
              <a href="author.html#218">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi tam,

this is not an easy thing to do !
First of all for the data itself. IzPack currently doesn't rollback (which
means delete folders and files installed, unregister keys....) automatically
when an error raises.

I can imagine that catching any kind of error during install and creating a
listener that would delete everything that has been installed up to now
wouldn't be too hard. I'm sure i'm missing something about that, coz
otherwise it would have been done already.

Nice thing to think about though !

Now, regarding DB. I doubt that you can easely manage DB rollbacks. Many
issues will come up. First of all , which DB are we talking about ? Second
of all, Not all DB transactions requires a commit, which means that rollback
wouldn't change a thing. Furthermore, if any update, insert or whatever
change you make the DB has to be effective it should be followed by a
commit. If the commit is done, then the rollback would be worthless.
At this point, i can only see the possibility to execute a commit ONLY after
everything went well during installation. Which means that you should
probably add an action on the button finish of a finishpanel or even better
create a new custompanel which would do the exact same thing as finishpanel
+ commiting your DB transactions.
This implies that the panel should allow to connect to a db and execute a
query. The best way is probably JDBC but it also means that the panel would
be quite big and very specific. Specific in the sense that you need JDBC
drivers for each kind of DB (oracle, ms, DB2....)

You would probably better use a script for the DB that runs right after
installation or during processpanel.
I explained something similar using JDBC in the Docu. It's in the cookbooks.

Cheers,
fabrice
----- Original Message ----- 
From: &quot;Tam&quot; &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/izpack-users">mj.tam at welcome-rt.com</A>&gt;
To: &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/izpack-users">izpack-users at lists.berlios.de</A>&gt;
Sent: Wednesday, February 15, 2006 4:07 AM
Subject: [izpack-users] Automatic Uninstall or Rollback to Previous version
if Any Error?


&gt;<i> Hi,
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Regarding the subject above, I need some help/advise from you. I have
</I>&gt;<i> successfully built installer by IzPack, but I am not sure whether the
</I>IzPack
&gt;<i> provide any feature on exception handling or automatic rollback when error
</I>&gt;<i> occurs as enhancement. The concern is I would like to include DB patch in
</I>&gt;<i> the installer, and I wish the installer can automatically rollback to
</I>&gt;<i> previous version for both application and DB if any failure. I am not sure
</I>&gt;<i> how can the installer detect error and perform the action I need.
</I>&gt;<i>
</I>&gt;<i> Hope can have your reply as soon as possible.
</I>&gt;<i>
</I>&gt;<i> Thank you.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000206.html">[izpack-users] Automatic Uninstall or Rollback to Previous version if Any Error?
</A></li>
	<LI>Next message: <A HREF="000207.html">[izpack-users] Passing INSTALL_PATH to a text file
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#218">[ date ]</a>
              <a href="thread.html#218">[ thread ]</a>
              <a href="subject.html#218">[ subject ]</a>
              <a href="author.html#218">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/izpack-users">More information about the izpack-users
mailing list</a><br>
</body></html>
