<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [izpack-changes] izpack-src/src/lib/com/izforge/izpack/installer AutomatedInstaller.java,1.14,1.15 CompileWorker.java,1.14,1.15 GUIInstaller.java,1.36,1.37 InstallerBase.java,1.30,1.31 InstallerFrame.java,1.49,1.50 IzPanel.java,1.30,1.31 ProcessPanelWorker.java,1.13,1.14 Unpacker.java,1.50,1.51 WebAccessor.java,1.7,1.8
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:izpack-changes%40lists.berlios.de?Subject=%5Bizpack-changes%5D%20izpack-src/src/lib/com/izforge/izpack/installer%20AutomatedInstaller.java%2C1.14%2C1.15%20CompileWorker.java%2C1.14%2C1.15%20GUIInstaller.java%2C1.36%2C1.37%20InstallerBase.java%2C1.30%2C1.31%20InstallerFrame.java%2C1.49%2C1.50%20IzPanel.java%2C1.30%2C1.31%20ProcessPanelWorker.java%2C1.13%2C1.14%20Unpacker.java%2C1.50%2C1.51%20WebAccessor.java%2C1.7%2C1.8&In-Reply-To=">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000148.html">
   <LINK REL="Next"  HREF="000151.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[izpack-changes] izpack-src/src/lib/com/izforge/izpack/installer AutomatedInstaller.java,1.14,1.15 CompileWorker.java,1.14,1.15 GUIInstaller.java,1.36,1.37 InstallerBase.java,1.30,1.31 InstallerFrame.java,1.49,1.50 IzPanel.java,1.30,1.31 ProcessPanelWorker.java,1.13,1.14 Unpacker.java,1.50,1.51 WebAccessor.java,1.7,1.8</H1>
    <B>jponge</B> 
    <A HREF="mailto:izpack-changes%40lists.berlios.de?Subject=%5Bizpack-changes%5D%20izpack-src/src/lib/com/izforge/izpack/installer%20AutomatedInstaller.java%2C1.14%2C1.15%20CompileWorker.java%2C1.14%2C1.15%20GUIInstaller.java%2C1.36%2C1.37%20InstallerBase.java%2C1.30%2C1.31%20InstallerFrame.java%2C1.49%2C1.50%20IzPanel.java%2C1.30%2C1.31%20ProcessPanelWorker.java%2C1.13%2C1.14%20Unpacker.java%2C1.50%2C1.51%20WebAccessor.java%2C1.7%2C1.8&In-Reply-To="
       TITLE="[izpack-changes] izpack-src/src/lib/com/izforge/izpack/installer AutomatedInstaller.java,1.14,1.15 CompileWorker.java,1.14,1.15 GUIInstaller.java,1.36,1.37 InstallerBase.java,1.30,1.31 InstallerFrame.java,1.49,1.50 IzPanel.java,1.30,1.31 ProcessPanelWorker.java,1.13,1.14 Unpacker.java,1.50,1.51 WebAccessor.java,1.7,1.8">nobody at sheep.berlios.de
       </A><BR>
    <I>Tue Mar 21 19:14:53 CET 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="000148.html">[izpack-changes] izpack-src/src/lib/com/izforge/izpack/gui TwoColumnLayout.java,1.10,1.11
</A></li>
        <LI>Next message: <A HREF="000151.html">[izpack-changes] izpack-src/src/lib/com/izforge/izpack/sample PWDEncryptor.java,1.3,1.4
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#150">[ date ]</a>
              <a href="thread.html#150">[ thread ]</a>
              <a href="subject.html#150">[ subject ]</a>
              <a href="author.html#150">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Update of /cvsroot/izpack/izpack-src/src/lib/com/izforge/izpack/installer
In directory sheep:/tmp/cvs-serv3622/src/lib/com/izforge/izpack/installer

Modified Files:
	AutomatedInstaller.java CompileWorker.java GUIInstaller.java 
	InstallerBase.java InstallerFrame.java IzPanel.java 
	ProcessPanelWorker.java Unpacker.java WebAccessor.java 
Log Message:
Some fixes adviced by IntelliJ IDEA 5.1 code inspector.

Index: AutomatedInstaller.java
===================================================================
RCS file: /cvsroot/izpack/izpack-src/src/lib/com/izforge/izpack/installer/AutomatedInstaller.java,v
retrieving revision 1.14
retrieving revision 1.15
diff -u -d -r1.14 -r1.15
--- AutomatedInstaller.java	12 Mar 2006 16:32:24 -0000	1.14
+++ AutomatedInstaller.java	21 Mar 2006 18:14:45 -0000	1.15
@@ -246,7 +246,6 @@
                     System.err.println(&quot;ERROR: automated installation failed for panel &quot;
                             + panelClassName);
                     e.printStackTrace();
-                    continue;
                 }
 
             }

Index: CompileWorker.java
===================================================================
RCS file: /cvsroot/izpack/izpack-src/src/lib/com/izforge/izpack/installer/CompileWorker.java,v
retrieving revision 1.14
retrieving revision 1.15
diff -u -d -r1.14 -r1.15
--- CompileWorker.java	12 Mar 2006 16:32:24 -0000	1.14
+++ CompileWorker.java	21 Mar 2006 18:14:45 -0000	1.15
@@ -67,9 +67,6 @@
 
     private VariableSubstitutor vs;
 
-    /** We spawn a thread to perform compilation. */
-    private Thread compilationThread;
-
     private XMLElement spec;
 
     private AutomatedInstallData idata;
@@ -102,7 +99,7 @@
         this.handler = handler;
         this.vs = new VariableSubstitutor(idata.getVariables());
 
-        this.compilationThread = null;
+        Thread compilationThread = null;
 
         if (!readSpec()) throw new IOException(&quot;Error reading compilation specification&quot;);
     }
@@ -168,9 +165,9 @@
     /** Start the compilation in a separate thread. */
     public void startThread()
     {
-        this.compilationThread = new Thread(this, &quot;compilation thread&quot;);
+        Thread compilationThread = new Thread(this, &quot;compilation thread&quot;);
         // will call this.run()
-        this.compilationThread.start();
+        compilationThread.start();
     }
 
     /**
@@ -387,16 +384,16 @@
         {
             XMLElement child = (XMLElement) toplevel_tags.nextElement();
 
-            if (child.getName().equals(&quot;classpath&quot;))
+            if (&quot;classpath&quot;.equals(child.getName()))
             {
                 changeClassPath(ourclasspath, child);
             }
-            else if (child.getName().equals(&quot;job&quot;))
+            else if (&quot;job&quot;.equals(child.getName()))
             {
                 CompilationJob subjob = collectJobsRecursive(child, ourclasspath);
                 if (subjob != null) this.jobs.add(subjob);
             }
-            else if (child.getName().equals(&quot;directory&quot;))
+            else if (&quot;directory&quot;.equals(child.getName()))
             {
                 String name = child.getAttribute(&quot;name&quot;);
 
@@ -409,7 +406,7 @@
                 }
 
             }
-            else if (child.getName().equals(&quot;file&quot;))
+            else if (&quot;file&quot;.equals(child.getName()))
             {
                 String name = child.getAttribute(&quot;name&quot;);
 
@@ -422,7 +419,7 @@
                 }
 
             }
-            else if (child.getName().equals(&quot;packdepency&quot;))
+            else if (&quot;packdepency&quot;.equals(child.getName()))
             {
                 String name = child.getAttribute(&quot;name&quot;);
 
@@ -622,7 +619,7 @@
             if (classpath_str.length() &gt; 0)
             {
                 args.add(&quot;-classpath&quot;);
-                cmdline_len = cmdline_len + 11;
+                cmdline_len += 11;
                 args.add(classpath_str);
                 cmdline_len += classpath_str.length() + 1;
             }

Index: GUIInstaller.java
===================================================================
RCS file: /cvsroot/izpack/izpack-src/src/lib/com/izforge/izpack/installer/GUIInstaller.java,v
retrieving revision 1.36
retrieving revision 1.37
diff -u -d -r1.36 -r1.37
--- GUIInstaller.java	12 Mar 2006 16:32:24 -0000	1.36
+++ GUIInstaller.java	21 Mar 2006 18:14:45 -0000	1.37
@@ -286,17 +286,15 @@
         // Resolve whether button icons should be used or not.
         boolean useButtonIcons = true;
         if (installdata.guiPrefs.modifier.containsKey(&quot;useButtonIcons&quot;)
-                &amp;&amp; ((String) installdata.guiPrefs.modifier.get(&quot;useButtonIcons&quot;))
-                        .equalsIgnoreCase(&quot;no&quot;)) useButtonIcons = false;
+                &amp;&amp; &quot;no&quot;.equalsIgnoreCase((String) installdata.guiPrefs.modifier.get(&quot;useButtonIcons&quot;))) useButtonIcons = false;
         ButtonFactory.useButtonIcons(useButtonIcons);
         boolean useLabelIcons = true;
         if (installdata.guiPrefs.modifier.containsKey(&quot;useLabelIcons&quot;)
-                &amp;&amp; ((String) installdata.guiPrefs.modifier.get(&quot;useLabelIcons&quot;))
-                        .equalsIgnoreCase(&quot;no&quot;)) useLabelIcons = false;
+                &amp;&amp; &quot;no&quot;.equalsIgnoreCase((String) installdata.guiPrefs.modifier.get(&quot;useLabelIcons&quot;))) useLabelIcons = false;
         LabelFactory.setUseLabelIcons(useLabelIcons);
         if (laf == null)
         {
-            if (!syskey.equals(&quot;mac&quot;))
+            if (!&quot;mac&quot;.equals(syskey))
             {
                 String syslaf = UIManager.getSystemLookAndFeelClassName();
                 UIManager.setLookAndFeel(syslaf);
@@ -316,7 +314,7 @@
         }
 
         // Kunststoff (<A HREF="http://www.incors.org/">http://www.incors.org/</A>)
-        if (laf.equals(&quot;kunststoff&quot;))
+        if (&quot;kunststoff&quot;.equals(laf))
         {
             ButtonFactory.useHighlightButtons();
             // Reset the use button icons state because useHighlightButtons
@@ -341,7 +339,7 @@
         }
 
         // Liquid (<A HREF="http://liquidlnf.sourceforge.net/">http://liquidlnf.sourceforge.net/</A>)
-        if (laf.equals(&quot;liquid&quot;))
+        if (&quot;liquid&quot;.equals(laf))
         {
             UIManager.setLookAndFeel(&quot;com.birosoft.liquid.LiquidLookAndFeel&quot;);
             lnf = &quot;liquid&quot;;
@@ -350,7 +348,7 @@
             if (params.containsKey(&quot;decorate.frames&quot;))
             {
                 String value = (String) params.get(&quot;decorate.frames&quot;);
-                if (value.equals(&quot;yes&quot;))
+                if (&quot;yes&quot;.equals(value))
                 {
                     JFrame.setDefaultLookAndFeelDecorated(true);
                 }
@@ -358,7 +356,7 @@
             if (params.containsKey(&quot;decorate.dialogs&quot;))
             {
                 String value = (String) params.get(&quot;decorate.dialogs&quot;);
-                if (value.equals(&quot;yes&quot;))
+                if (&quot;yes&quot;.equals(value))
                 {
                     JDialog.setDefaultLookAndFeelDecorated(true);
                 }
@@ -368,7 +366,7 @@
         }
 
         // Metouia (<A HREF="http://mlf.sourceforge.net/">http://mlf.sourceforge.net/</A>)
-        if (laf.equals(&quot;metouia&quot;))
+        if (&quot;metouia&quot;.equals(laf))
         {
             UIManager.setLookAndFeel(&quot;net.sourceforge.mlf.metouia.MetouiaLookAndFeel&quot;);
             lnf = &quot;metouia&quot;;
@@ -376,7 +374,7 @@
         }
 
         // JGoodies Looks (<A HREF="http://looks.dev.java.net/">http://looks.dev.java.net/</A>)
-        if (laf.equals(&quot;looks&quot;))
+        if (&quot;looks&quot;.equals(laf))
         {
             Map variants = new TreeMap();
             variants.put(&quot;extwin&quot;, &quot;com.jgoodies.plaf.windows.ExtWindowsLookAndFeel&quot;);
@@ -424,7 +422,7 @@
     protected boolean useFlags()
     {
         if (installdata.guiPrefs.modifier.containsKey(&quot;useFlags&quot;)
-                &amp;&amp; ((String) installdata.guiPrefs.modifier.get(&quot;useFlags&quot;)).equalsIgnoreCase(&quot;no&quot;))
+                &amp;&amp; &quot;no&quot;.equalsIgnoreCase((String) installdata.guiPrefs.modifier.get(&quot;useFlags&quot;)))
             return (false);
         return (true);
     }
@@ -466,9 +464,6 @@
         /** The combo box. */
         private JComboBox comboBox;
 
-        /** The ok button. */
-        private JButton okButton;
-
         /** The ISO3 to ISO2 HashMap */
         private HashMap iso3Toiso2 = null;
 
@@ -539,7 +534,7 @@
             layout.addLayoutComponent(comboBox, gbConstraints);
             contentPane.add(comboBox);
 
-            okButton = new JButton(&quot;OK&quot;);
+            JButton okButton = new JButton(&quot;OK&quot;);
             okButton.addActionListener(this);
             gbConstraints.fill = GridBagConstraints.NONE;
             gbConstraints.gridy = 4;

Index: InstallerBase.java
===================================================================
RCS file: /cvsroot/izpack/izpack-src/src/lib/com/izforge/izpack/installer/InstallerBase.java,v
retrieving revision 1.30
retrieving revision 1.31
diff -u -d -r1.30 -r1.31
--- InstallerBase.java	12 Mar 2006 16:32:24 -0000	1.30
+++ InstallerBase.java	21 Mar 2006 18:14:45 -0000	1.31
@@ -160,7 +160,7 @@
 				
 
         installdata.setVariable(&quot;APPLICATIONS_DEFAULT_ROOT&quot;, dir);
-        dir = dir + File.separator;
+        dir += File.separator;
         installdata.setVariable(ScriptParser.JAVA_HOME, System.getProperty(&quot;java.home&quot;));
         installdata.setVariable(ScriptParser.CLASS_PATH, System.getProperty(&quot;java.class.path&quot;));
         installdata.setVariable(ScriptParser.USER_HOME, System.getProperty(&quot;user.home&quot;));

Index: InstallerFrame.java
===================================================================
RCS file: /cvsroot/izpack/izpack-src/src/lib/com/izforge/izpack/installer/InstallerFrame.java,v
retrieving revision 1.49
retrieving revision 1.50
diff -u -d -r1.49 -r1.50
--- InstallerFrame.java	12 Mar 2006 16:32:24 -0000	1.49
+++ InstallerFrame.java	21 Mar 2006 18:14:46 -0000	1.50
@@ -532,7 +532,7 @@
                 {
                     String key = (String) keys.next();
                     Object contents = additionalData.get(key);
-                    if (key.equals(&quot;__uninstallLibs__&quot;))
+                    if (&quot;__uninstallLibs__&quot;.equals(key))
                     {
                         Iterator nativeLibIter = ((List) contents).iterator();
                         while (nativeLibIter != null &amp;&amp; nativeLibIter.hasNext())
@@ -552,7 +552,7 @@
                             outJar.closeEntry();
                         }
                     }
-                    else if (key.equals(&quot;uninstallerListeners&quot;) || key.equals(&quot;uninstallerJars&quot;))
+                    else if (&quot;uninstallerListeners&quot;.equals(key) || &quot;uninstallerJars&quot;.equals(key))
                     { // It is a ArrayList of ArrayLists which contains the
                         // full
                         // package paths of all needed class files.
@@ -767,7 +767,7 @@
             f.delete();
         }
         String fullCleanup = installdata.getVariable(&quot;InstallerFrame.cleanAllAtInterrupt&quot;);
-        if (fullCleanup == null || !fullCleanup.equalsIgnoreCase(&quot;no&quot;))
+        if (fullCleanup == null || !&quot;no&quot;.equalsIgnoreCase(fullCleanup))
             cleanWipe(new File(installdata.getInstallPath()));
     }
 
@@ -824,8 +824,9 @@
      */
     public void setQuitButtonText(String text)
     {
-        if (text == null) text = langpack.getString(&quot;installer.quit&quot;);
-        quitButton.setText(text);
+        String text1 = text;
+        if (text1 == null) text1 = langpack.getString(&quot;installer.quit&quot;);
+        quitButton.setText(text1);
     }
 
     /*

Index: IzPanel.java
===================================================================
RCS file: /cvsroot/izpack/izpack-src/src/lib/com/izforge/izpack/installer/IzPanel.java,v
retrieving revision 1.30
retrieving revision 1.31
diff -u -d -r1.30 -r1.31
--- IzPanel.java	12 Mar 2006 16:32:24 -0000	1.30
+++ IzPanel.java	21 Mar 2006 18:14:46 -0000	1.31
@@ -718,7 +718,7 @@
         String todo = idata.getVariable(&quot;IzPanel.LayoutType&quot;);
         if (todo == null) // No command, no work.
             return;
-        if (todo.equals(&quot;BOTTOM&quot;))
+        if (&quot;BOTTOM&quot;.equals(todo))
         { // Make a header to push the rest to the bottom.
             Filler dummy = new Filler();
             GridBagConstraints gbConstraint = getNextYGridBagConstraints();
@@ -741,7 +741,7 @@
         String todo = idata.getVariable(&quot;IzPanel.LayoutType&quot;);
         if (todo == null) // No command, no work.
             return;
-        if (todo.equals(&quot;TOP&quot;))
+        if (&quot;TOP&quot;.equals(todo))
         { // Make a footer to push the rest to the top.
             Filler dummy = new Filler();
             GridBagConstraints gbConstraint = getNextYGridBagConstraints();

Index: ProcessPanelWorker.java
===================================================================
RCS file: /cvsroot/izpack/izpack-src/src/lib/com/izforge/izpack/installer/ProcessPanelWorker.java,v
retrieving revision 1.13
retrieving revision 1.14
diff -u -d -r1.13 -r1.14
--- ProcessPanelWorker.java	12 Mar 2006 16:32:25 -0000	1.13
+++ ProcessPanelWorker.java	21 Mar 2006 18:14:46 -0000	1.14
@@ -70,14 +70,10 @@
 
     private VariableSubstitutor vs;
 
-    private XMLElement spec;
-
     protected AbstractUIProcessHandler handler;
 
     private ArrayList jobs = new ArrayList();
 
-    private Thread processingThread = null;
-
     private static PrintWriter logfile = null;
 
     private String logfiledir = null;
@@ -120,11 +116,12 @@
         parser.setBuilder(new StdXMLBuilder());
         parser.setValidator(new NonValidator());
 
+        XMLElement spec;
         try
         {
             parser.setReader(new StdXMLReader(input));
 
-            this.spec = (XMLElement) parser.parse();
+            spec = (XMLElement) parser.parse();
         }
         catch (Exception e)
         {
@@ -133,7 +130,7 @@
             return false;
         }
 
-        if (!this.spec.hasChildren()) return false;
+        if (!spec.hasChildren()) return false;
 
         // Handle logfile
         XMLElement lfd = spec.getFirstChildNamed(&quot;logfiledir&quot;);
@@ -142,7 +139,7 @@
             logfiledir = lfd.getContent();
         }
 
-        for (Iterator job_it = this.spec.getChildrenNamed(&quot;job&quot;).iterator(); job_it.hasNext();)
+        for (Iterator job_it = spec.getChildrenNamed(&quot;job&quot;).iterator(); job_it.hasNext();)
         {
             XMLElement job_el = (XMLElement) job_it.next();
 
@@ -298,9 +295,9 @@
     /** Start the compilation in a separate thread. */
     public void startThread()
     {
-        this.processingThread = new Thread(this, &quot;processing thread&quot;);
+        Thread processingThread = new Thread(this, &quot;processing thread&quot;);
         // will call this.run()
-        this.processingThread.start();
+        processingThread.start();
     }
 
     interface Processable
@@ -424,7 +421,7 @@
             catch (InterruptedException e)
             {}
 
-            if (t.isAlive() == false) return;
+            if (!t.isAlive()) return;
 
             t.interrupt();
             long hardTimeout = 500;

Index: Unpacker.java
===================================================================
RCS file: /cvsroot/izpack/izpack-src/src/lib/com/izforge/izpack/installer/Unpacker.java,v
retrieving revision 1.50
retrieving revision 1.51
diff -u -d -r1.50 -r1.51
--- Unpacker.java	12 Mar 2006 16:32:25 -0000	1.50
+++ Unpacker.java	21 Mar 2006 18:14:46 -0000	1.51
@@ -309,11 +309,11 @@
                 final Pack pack = ((Pack) packs.get(i));
                 String stepname = pack.name;// the message to be passed to the
                 // installpanel
-                if (langpack != null &amp;&amp; !(pack.id == null || pack.id.equals(&quot;&quot;)))
+                if (langpack != null &amp;&amp; !(pack.id == null || &quot;&quot;.equals(pack.id)))
                 {
 
                     final String name = langpack.getString(pack.id);
-                    if (name != null &amp;&amp; !name.equals(&quot;&quot;))
+                    if (name != null &amp;&amp; !&quot;&quot;.equals(name))
                     {
                         stepname = name;
                     }
@@ -783,7 +783,7 @@
                     case '*': {
                         if (pos == element.length())
                         {
-                            element_re.append(&quot;[^&quot; + File.separator + &quot;]*&quot;);
+                            element_re.append(&quot;[^&quot;).append(File.separator).append(&quot;]*&quot;);
                             break;
                         }
 
@@ -798,7 +798,7 @@
                         }
                         else
                         {
-                            element_re.append(&quot;[^&quot; + File.separator + &quot;]*&quot;);
+                            element_re.append(&quot;[^&quot;).append(File.separator).append(&quot;]*&quot;);
                             // lookahead stays there
                         }
                         break;

Index: WebAccessor.java
===================================================================
RCS file: /cvsroot/izpack/izpack-src/src/lib/com/izforge/izpack/installer/WebAccessor.java,v
retrieving revision 1.7
retrieving revision 1.8
diff -u -d -r1.7 -r1.8
--- WebAccessor.java	12 Mar 2006 16:32:25 -0000	1.7
+++ WebAccessor.java	21 Mar 2006 18:14:46 -0000	1.8
@@ -341,5 +341,5 @@
 
             return new PasswordAuthentication(nameField.getText(), passField.getPassword());
         }
-    };
+    }
 }


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000148.html">[izpack-changes] izpack-src/src/lib/com/izforge/izpack/gui TwoColumnLayout.java,1.10,1.11
</A></li>
	<LI>Next message: <A HREF="000151.html">[izpack-changes] izpack-src/src/lib/com/izforge/izpack/sample PWDEncryptor.java,1.3,1.4
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#150">[ date ]</a>
              <a href="thread.html#150">[ thread ]</a>
              <a href="subject.html#150">[ subject ]</a>
              <a href="author.html#150">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/izpack-changes">More information about the izpack-changes
mailing list</a><br>
</body></html>
