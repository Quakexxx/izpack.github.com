<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [izpack-changes] izpack-src/src/lib/com/izforge/izpack/util Console.java,1.9,1.10 Debug.java,1.9,1.10 FileExecutor.java,1.20,1.21 FileUtil.java,1.1,1.2 HostAddressValidator.java,1.5,1.6 IoHelper.java,1.25,1.26 IsPortValidator.java,1.4,1.5 JarOutputStream.java,1.4,1.5 OSClassHelper.java,1.6,1.7 OsConstraint.java,1.13,1.14 OsVersion.java,1.14,1.15 PortValidator.java,1.4,1.5 StringTool.java,1.8,1.9 TargetFactory.java,1.19,1.20
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:izpack-changes%40lists.berlios.de?Subject=%5Bizpack-changes%5D%20izpack-src/src/lib/com/izforge/izpack/util%20Console.java%2C1.9%2C1.10%20Debug.java%2C1.9%2C1.10%20FileExecutor.java%2C1.20%2C1.21%20FileUtil.java%2C1.1%2C1.2%20HostAddressValidator.java%2C1.5%2C1.6%20IoHelper.java%2C1.25%2C1.26%20IsPortValidator.java%2C1.4%2C1.5%20JarOutputStream.java%2C1.4%2C1.5%20OSClassHelper.java%2C1.6%2C1.7%20OsConstraint.java%2C1.13%2C1.14%20OsVersion.java%2C1.14%2C1.15%20PortValidator.java%2C1.4%2C1.5%20StringTool.java%2C1.8%2C1.9%20TargetFactory.java%2C1.19%2C1.20&In-Reply-To=">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000155.html">
   <LINK REL="Next"  HREF="000157.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[izpack-changes] izpack-src/src/lib/com/izforge/izpack/util Console.java,1.9,1.10 Debug.java,1.9,1.10 FileExecutor.java,1.20,1.21 FileUtil.java,1.1,1.2 HostAddressValidator.java,1.5,1.6 IoHelper.java,1.25,1.26 IsPortValidator.java,1.4,1.5 JarOutputStream.java,1.4,1.5 OSClassHelper.java,1.6,1.7 OsConstraint.java,1.13,1.14 OsVersion.java,1.14,1.15 PortValidator.java,1.4,1.5 StringTool.java,1.8,1.9 TargetFactory.java,1.19,1.20</H1>
    <B>jponge</B> 
    <A HREF="mailto:izpack-changes%40lists.berlios.de?Subject=%5Bizpack-changes%5D%20izpack-src/src/lib/com/izforge/izpack/util%20Console.java%2C1.9%2C1.10%20Debug.java%2C1.9%2C1.10%20FileExecutor.java%2C1.20%2C1.21%20FileUtil.java%2C1.1%2C1.2%20HostAddressValidator.java%2C1.5%2C1.6%20IoHelper.java%2C1.25%2C1.26%20IsPortValidator.java%2C1.4%2C1.5%20JarOutputStream.java%2C1.4%2C1.5%20OSClassHelper.java%2C1.6%2C1.7%20OsConstraint.java%2C1.13%2C1.14%20OsVersion.java%2C1.14%2C1.15%20PortValidator.java%2C1.4%2C1.5%20StringTool.java%2C1.8%2C1.9%20TargetFactory.java%2C1.19%2C1.20&In-Reply-To="
       TITLE="[izpack-changes] izpack-src/src/lib/com/izforge/izpack/util Console.java,1.9,1.10 Debug.java,1.9,1.10 FileExecutor.java,1.20,1.21 FileUtil.java,1.1,1.2 HostAddressValidator.java,1.5,1.6 IoHelper.java,1.25,1.26 IsPortValidator.java,1.4,1.5 JarOutputStream.java,1.4,1.5 OSClassHelper.java,1.6,1.7 OsConstraint.java,1.13,1.14 OsVersion.java,1.14,1.15 PortValidator.java,1.4,1.5 StringTool.java,1.8,1.9 TargetFactory.java,1.19,1.20">nobody at sheep.berlios.de
       </A><BR>
    <I>Tue Mar 21 19:15:06 CET 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="000155.html">[izpack-changes] izpack-src/src/lib/net/n3/nanoxml NonValidator.java,1.7,1.8 StdXMLParser.java,1.8,1.9 StdXMLReader.java,1.9,1.10
</A></li>
        <LI>Next message: <A HREF="000157.html">[izpack-changes] izpack-src/src/lib/com/izforge/izpack ExecutableFile.java,1.10,1.11 Info.java,1.27,1.28 LocaleDatabase.java,1.21,1.22 Pack.java,1.27,1.28 UpdateCheck.java,1.4,1.5
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#158">[ date ]</a>
              <a href="thread.html#158">[ thread ]</a>
              <a href="subject.html#158">[ subject ]</a>
              <a href="author.html#158">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Update of /cvsroot/izpack/izpack-src/src/lib/com/izforge/izpack/util
In directory sheep:/tmp/cvs-serv3622/src/lib/com/izforge/izpack/util

Modified Files:
	Console.java Debug.java FileExecutor.java FileUtil.java 
	HostAddressValidator.java IoHelper.java IsPortValidator.java 
	JarOutputStream.java OSClassHelper.java OsConstraint.java 
	OsVersion.java PortValidator.java StringTool.java 
	TargetFactory.java 
Log Message:
Some fixes adviced by IntelliJ IDEA 5.1 code inspector.

Index: Console.java
===================================================================
RCS file: /cvsroot/izpack/izpack-src/src/lib/com/izforge/izpack/util/Console.java,v
retrieving revision 1.9
retrieving revision 1.10
diff -u -d -r1.9 -r1.10
--- Console.java	12 Mar 2006 16:32:27 -0000	1.9
+++ Console.java	21 Mar 2006 18:14:51 -0000	1.10
@@ -296,7 +296,7 @@
     {
         textArea.write(str);
     }
-};
+}
 
 class ConsoleWriter extends java.io.OutputStream
 {
@@ -351,7 +351,7 @@
         buffer.setLength(0);
         SwingUtilities.invokeLater(new ConsoleWrite(textArea, str));
     }
-};
+}
 
 class ConsoleTextArea extends JTextArea implements KeyListener, DocumentListener
 {
@@ -363,8 +363,6 @@
 
     private ConsoleWriter console1;
 
-    private ConsoleWriter console2;
-
     private PrintStream out;
 
     private PrintStream err;
@@ -390,7 +388,7 @@
         super();
         history = new java.util.Vector();
         console1 = new ConsoleWriter(this);
-        console2 = new ConsoleWriter(this);
+        ConsoleWriter console2 = new ConsoleWriter(this);
         out = new PrintStream(console1);
         err = new PrintStream(console2);
         PipedOutputStream outPipe = new PipedOutputStream();
@@ -629,4 +627,4 @@
         return err;
     }
 
-};
+}
\ No newline at end of file

Index: Debug.java
===================================================================
RCS file: /cvsroot/izpack/izpack-src/src/lib/com/izforge/izpack/util/Debug.java,v
retrieving revision 1.9
retrieving revision 1.10
diff -u -d -r1.9 -r1.10
--- Debug.java	12 Mar 2006 16:32:28 -0000	1.9
+++ Debug.java	21 Mar 2006 18:14:51 -0000	1.10
@@ -112,15 +112,9 @@
   public static String LOGFILENAME = LOGFILE_PREFIX + System.currentTimeMillis(  ) +
                                      LOGFILE_EXTENSION;
 
-  /** internal used File writer */
-  private static BufferedWriter fw;
-
-  /** internal used Printfile writer */
-  private static PrintWriter logfile;
-
-  /**
-   * The log initializion bloc.
-   */
+    /**
+     * The log initializion bloc.
+     */
   static
   {
     boolean st = false;
@@ -172,7 +166,7 @@
     if( LOG )
     {
       System.out.println( DLOG + &quot; enabled.&quot; );
-      logfile = createLogFile(  );
+      PrintWriter logfile = createLogFile();
 
       Debug.log( Installer.class.getName(  ) + &quot; LogFile created at &quot; +
                  new Date( System.currentTimeMillis(  ) ) );
@@ -255,12 +249,13 @@
   public static void log( Object o )
   {
     //if LOG was given 
-    if( LOG == true )
+    if(LOG )
     {
-      if( ( logfile = getLogFile(  ) ) == null )
-      {
-        logfile = createLogFile(  );
-      }
+        PrintWriter logfile;
+        if( ( logfile = getLogFile(  ) ) == null )
+        {
+          logfile = createLogFile(  );
+        }
 
       if( logfile != null )
       {
@@ -314,26 +309,27 @@
 
     File out = new File( tempDir, logfilename );
 
-    if( tempDirFile.canWrite(  ) )
-    {
-      try
+      PrintWriter logfile;
+      if( tempDirFile.canWrite(  ) )
       {
-        fw      = new BufferedWriter( new OutputStreamWriter( new FileOutputStream( out ),
-                                                              &quot;UTF-8&quot; ) );
-        logfile = setLogFile( new PrintWriter( fw ) );
+        try
+        {
+            BufferedWriter fw = new BufferedWriter(new OutputStreamWriter(new FileOutputStream(out),
+                    &quot;UTF-8&quot;));
+          logfile = setLogFile( new PrintWriter( fw ) );
+        }
+        catch( Exception e )
+        {
+          logfile = null;
+          e.printStackTrace(  );
+        }
       }
-      catch( Exception e )
+      else
       {
         logfile = null;
-        e.printStackTrace(  );
+        System.err.println( &quot;Fatal: cannot write File: '&quot; + logfilename + &quot;' into: &quot; +
+                            tempDirFile );
       }
-    }
-    else
-    {
-      logfile = null;
-      System.err.println( &quot;Fatal: cannot write File: '&quot; + logfilename + &quot;' into: &quot; +
-                          tempDirFile );
-    }
 
     return logfile;
   }
@@ -428,7 +424,7 @@
    */
   public static PrintWriter getLogFile(  )
   {
-    logfile = (PrintWriter) System.getProperties(  ).get( IZPACK_LOGFILE );
+    PrintWriter logfile = (PrintWriter) System.getProperties().get(IZPACK_LOGFILE);
 
     return logfile;
   }
@@ -443,7 +439,7 @@
   {
     System.getProperties(  ).put( IZPACK_LOGFILE, aLogFile );
 
-    logfile = (PrintWriter) System.getProperties(  ).get( IZPACK_LOGFILE );
+    PrintWriter logfile = (PrintWriter) System.getProperties().get(IZPACK_LOGFILE);
 
     if( logfile == null )
     {

Index: FileExecutor.java
===================================================================
RCS file: /cvsroot/izpack/izpack-src/src/lib/com/izforge/izpack/util/FileExecutor.java,v
retrieving revision 1.20
retrieving revision 1.21
diff -u -d -r1.20 -r1.21
--- FileExecutor.java	12 Mar 2006 16:32:28 -0000	1.20
+++ FileExecutor.java	21 Mar 2006 18:14:51 -0000	1.21
@@ -152,7 +152,7 @@
         {
             for (int i = 0; i &lt; params.length; i++)
             {
-                retval.append(&quot;\tparams: &quot; + params[i]);
+                retval.append(&quot;\tparams: &quot;).append(params[i]);
                 retval.append(&quot;\n&quot;);
             }
         }

Index: FileUtil.java
===================================================================
RCS file: /cvsroot/izpack/izpack-src/src/lib/com/izforge/izpack/util/FileUtil.java,v
retrieving revision 1.1
retrieving revision 1.2
diff -u -d -r1.1 -r1.2
--- FileUtil.java	26 Aug 2005 08:28:47 -0000	1.1
+++ FileUtil.java	21 Mar 2006 18:14:52 -0000	1.2
@@ -106,8 +106,8 @@
   {
     boolean result = false;
 
-    String  searchString = new String( caseInSensitiveSearch
-                                       ? aSearchString.toLowerCase() : aSearchString );
+    String  searchString = caseInSensitiveSearch
+            ? aSearchString.toLowerCase() : aSearchString;
 
     ArrayList fileContent = new ArrayList();
 
@@ -127,7 +127,7 @@
     {
       String currentline = (String) linesIter.next(  );
 
-      if( caseInSensitiveSearch == true )
+      if(caseInSensitiveSearch )
       {
         currentline = currentline.toLowerCase(  );
       }

Index: HostAddressValidator.java
===================================================================
RCS file: /cvsroot/izpack/izpack-src/src/lib/com/izforge/izpack/util/HostAddressValidator.java,v
retrieving revision 1.5
retrieving revision 1.6
diff -u -d -r1.5 -r1.6
--- HostAddressValidator.java	12 Mar 2006 16:32:28 -0000	1.5
+++ HostAddressValidator.java	21 Mar 2006 18:14:52 -0000	1.6
@@ -59,14 +59,7 @@
         {
             inet = InetAddress.getByName(host);
             ServerSocket socket = new ServerSocket(port, 0, inet);
-            if (socket.getLocalPort() &gt; 0)
-            {
-                retValue = true;
-            }
-            else
-            {
-                retValue = false;
-            }
+            retValue = socket.getLocalPort() &gt; 0;
             socket.close();
         }
         catch (Exception ex)

Index: IoHelper.java
===================================================================
RCS file: /cvsroot/izpack/izpack-src/src/lib/com/izforge/izpack/util/IoHelper.java,v
retrieving revision 1.25
retrieving revision 1.26
diff -u -d -r1.25 -r1.26
--- IoHelper.java	12 Mar 2006 16:32:28 -0000	1.25
+++ IoHelper.java	21 Mar 2006 18:14:52 -0000	1.26
@@ -325,7 +325,7 @@
      */
     public static boolean supported(String method)
     {
-        if (method.equals(&quot;getFreeSpace&quot;))
+        if (&quot;getFreeSpace&quot;.equals(method))
         {
             if (OsVersion.IS_UNIX) return true;
             if (OsVersion.IS_WINDOWS)
@@ -335,19 +335,19 @@
                 return (true);
             }
         }
-        else if (method.equals(&quot;chmod&quot;))
+        else if (&quot;chmod&quot;.equals(method))
         {
             if (OsVersion.IS_UNIX) return true;
         }
-        else if (method.equals(&quot;copyFile&quot;))
+        else if (&quot;copyFile&quot;.equals(method))
         {
             return true;
         }
-        else if (method.equals(&quot;getPrimaryGroup&quot;))
+        else if (&quot;getPrimaryGroup&quot;.equals(method))
         {
             if (OsVersion.IS_UNIX) return true;
         }
-        else if (method.equals(&quot;getenv&quot;))
+        else if (&quot;getenv&quot;.equals(method))
         {
             return true;
         }

Index: IsPortValidator.java
===================================================================
RCS file: /cvsroot/izpack/izpack-src/src/lib/com/izforge/izpack/util/IsPortValidator.java,v
retrieving revision 1.4
retrieving revision 1.5
diff -u -d -r1.4 -r1.5
--- IsPortValidator.java	12 Mar 2006 16:32:28 -0000	1.4
+++ IsPortValidator.java	21 Mar 2006 18:14:52 -0000	1.5
@@ -36,7 +36,7 @@
     {
         int port = 0;
 
-        if (client.getFieldContents(0).equals(&quot;&quot;)) { return false; }
+        if (&quot;&quot;.equals(client.getFieldContents(0))) { return false; }
 
         try
         {

Index: JarOutputStream.java
===================================================================
RCS file: /cvsroot/izpack/izpack-src/src/lib/com/izforge/izpack/util/JarOutputStream.java,v
retrieving revision 1.4
retrieving revision 1.5
diff -u -d -r1.4 -r1.5
--- JarOutputStream.java	12 Mar 2006 16:32:28 -0000	1.4
+++ JarOutputStream.java	21 Mar 2006 18:14:52 -0000	1.5
@@ -234,7 +234,7 @@
      */
     private static void set16(byte[] b, int off, int value) 
     {
-		b[off+0] = (byte)value;
+		b[off] = (byte)value;
 		b[off+1] = (byte)(value &gt;&gt; 8);
     }
 

Index: OSClassHelper.java
===================================================================
RCS file: /cvsroot/izpack/izpack-src/src/lib/com/izforge/izpack/util/OSClassHelper.java,v
retrieving revision 1.6
retrieving revision 1.7
diff -u -d -r1.6 -r1.7
--- OSClassHelper.java	12 Mar 2006 16:32:28 -0000	1.6
+++ OSClassHelper.java	21 Mar 2006 18:14:52 -0000	1.7
@@ -88,7 +88,7 @@
 
     public boolean good()
     {
-        return (worker != null ? true : false);
+        return (worker != null);
     }
 
     public boolean verify(AutomatedInstallData idata) throws Exception

Index: OsConstraint.java
===================================================================
RCS file: /cvsroot/izpack/izpack-src/src/lib/com/izforge/izpack/util/OsConstraint.java,v
retrieving revision 1.13
retrieving revision 1.14
diff -u -d -r1.13 -r1.14
--- OsConstraint.java	12 Mar 2006 16:32:28 -0000	1.13
+++ OsConstraint.java	21 Mar 2006 18:14:52 -0000	1.14
@@ -96,15 +96,15 @@
         }
         if (match &amp;&amp; family != null)
         {
-            if (family.equals(&quot;windows&quot;))
+            if (&quot;windows&quot;.equals(family))
             {
                 match = OsVersion.IS_WINDOWS;
             }
-            else if (family.equals(&quot;mac&quot;) || family.equals(&quot;osx&quot;))
+            else if (&quot;mac&quot;.equals(family) || &quot;osx&quot;.equals(family))
             {
                 match = OsVersion.IS_OSX;
             }
-            else if (family.equals(&quot;unix&quot;))
+            else if (&quot;unix&quot;.equals(family))
             {
                 match = OsVersion.IS_UNIX;
             }
@@ -236,10 +236,10 @@
     {
         StringBuffer retval = new StringBuffer();
         retval.append(&quot;[Os &quot;);
-        retval.append(&quot; family &quot; + family);
-        retval.append(&quot; name &quot; + name);
-        retval.append(&quot; version &quot; + version);
-        retval.append(&quot; arch &quot; + arch);
+        retval.append(&quot; family &quot;).append(family);
+        retval.append(&quot; name &quot;).append(name);
+        retval.append(&quot; version &quot;).append(version);
+        retval.append(&quot; arch &quot;).append(arch);
         retval.append(&quot; ]&quot;);
         return retval.toString();
     }

Index: OsVersion.java
===================================================================
RCS file: /cvsroot/izpack/izpack-src/src/lib/com/izforge/izpack/util/OsVersion.java,v
retrieving revision 1.14
retrieving revision 1.15
diff -u -d -r1.14 -r1.15
--- OsVersion.java	12 Mar 2006 16:32:28 -0000	1.14
+++ OsVersion.java	21 Mar 2006 18:14:52 -0000	1.15
@@ -102,7 +102,7 @@
      */
     private static String getReleaseFileName()
     {
-        String result = new String();
+        String result = &quot;&quot;;
 
         File[] etcList = new File(&quot;/etc&quot;).listFiles();
         
@@ -227,19 +227,19 @@
     public static String getOsDetails()
     {
         StringBuffer result = new StringBuffer();
-        result.append( &quot;OS_NAME=&quot; + OS_NAME + NL );
+        result.append(&quot;OS_NAME=&quot;).append(OS_NAME).append(NL);
 
         if( IS_UNIX )
         {
             if( IS_LINUX )
             {
-              result.append( getLinuxDistribution() + NL );
+                result.append(getLinuxDistribution()).append(NL);
             }
             else
             {
                 try
                 {
-                  result.append( FileUtil.getFileContent( getReleaseFileName() ) + NL );
+                    result.append(FileUtil.getFileContent(getReleaseFileName())).append(NL);
                 }
                 catch (IOException e)
                 {
@@ -250,8 +250,7 @@
 
         if( IS_WINDOWS )
         {
-            result.append( System.getProperty( OSNAME ) + SP
-                    + System.getProperty( &quot;sun.os.patch.level&quot;, &quot;&quot; ) + NL );
+            result.append(System.getProperty(OSNAME)).append(SP).append(System.getProperty(&quot;sun.os.patch.level&quot;, &quot;&quot;)).append(NL);
         }
         return result.toString();
     }

Index: PortValidator.java
===================================================================
RCS file: /cvsroot/izpack/izpack-src/src/lib/com/izforge/izpack/util/PortValidator.java,v
retrieving revision 1.4
retrieving revision 1.5
diff -u -d -r1.4 -r1.5
--- PortValidator.java	12 Mar 2006 16:32:28 -0000	1.4
+++ PortValidator.java	21 Mar 2006 18:14:52 -0000	1.5
@@ -55,14 +55,7 @@
             {
                 inet = InetAddress.getByName(host);
                 ServerSocket socket = new ServerSocket(Integer.parseInt(value), 0, inet);
-                if (socket.getLocalPort() &gt; 0)
-                {
-                    retValue = true;
-                }
-                else
-                {
-                    retValue = false;
-                }
+                retValue = socket.getLocalPort() &gt; 0;
                 if (!retValue)
                 {
                     break;

Index: StringTool.java
===================================================================
RCS file: /cvsroot/izpack/izpack-src/src/lib/com/izforge/izpack/util/StringTool.java,v
retrieving revision 1.8
retrieving revision 1.9
diff -u -d -r1.8 -r1.9
--- StringTool.java	12 Mar 2006 16:32:28 -0000	1.8
+++ StringTool.java	21 Mar 2006 18:14:52 -0000	1.9
@@ -207,7 +207,7 @@
     
         for (int idx = 0; idx &lt; aStringList.size(); idx++)
         {
-            temp.append(aStringList.get(idx) + &quot;\n&quot;);
+            temp.append(aStringList.get(idx)).append(&quot;\n&quot;);
         }
     
         return temp.toString();

Index: TargetFactory.java
===================================================================
RCS file: /cvsroot/izpack/izpack-src/src/lib/com/izforge/izpack/util/TargetFactory.java,v
retrieving revision 1.19
retrieving revision 1.20
diff -u -d -r1.19 -r1.20
--- TargetFactory.java	12 Mar 2006 16:32:28 -0000	1.19
+++ TargetFactory.java	21 Mar 2006 18:14:52 -0000	1.20
@@ -612,7 +612,7 @@
                 while (line != null)
                 {
                     line = line.trim();
-                    if (!line.equals(&quot;&quot;))
+                    if (!&quot;&quot;.equals(line))
                     {
                         break;
                     }
@@ -637,7 +637,7 @@
         // if we were unable to obtain a path from a resource,
         // use the default for the traget operating system.
         // ----------------------------------------------------
-        if (path == null || path.equals(&quot;&quot;))
+        if (path == null || &quot;&quot;.equals(path))
         {
             path = &quot;&quot;;
 


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000155.html">[izpack-changes] izpack-src/src/lib/net/n3/nanoxml NonValidator.java,1.7,1.8 StdXMLParser.java,1.8,1.9 StdXMLReader.java,1.9,1.10
</A></li>
	<LI>Next message: <A HREF="000157.html">[izpack-changes] izpack-src/src/lib/com/izforge/izpack ExecutableFile.java,1.10,1.11 Info.java,1.27,1.28 LocaleDatabase.java,1.21,1.22 Pack.java,1.27,1.28 UpdateCheck.java,1.4,1.5
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#158">[ date ]</a>
              <a href="thread.html#158">[ thread ]</a>
              <a href="subject.html#158">[ subject ]</a>
              <a href="author.html#158">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/izpack-changes">More information about the izpack-changes
mailing list</a><br>
</body></html>
