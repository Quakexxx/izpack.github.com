<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [izpack-changes] r1509 - in izpack-src/trunk: . src/dist-files	src/lib/com/izforge/izpack/gui src/tests/com/izforge/izpack
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:izpack-changes%40lists.berlios.de?Subject=%5Bizpack-changes%5D%20r1509%20-%20in%20izpack-src/trunk%3A%20.%20src/dist-files%0A%09src/lib/com/izforge/izpack/gui%20src/tests/com/izforge/izpack&In-Reply-To=">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000252.html">
   
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[izpack-changes] r1509 - in izpack-src/trunk: . src/dist-files	src/lib/com/izforge/izpack/gui src/tests/com/izforge/izpack</H1>
    <B>noreply at berlios.de</B> 
    <A HREF="mailto:izpack-changes%40lists.berlios.de?Subject=%5Bizpack-changes%5D%20r1509%20-%20in%20izpack-src/trunk%3A%20.%20src/dist-files%0A%09src/lib/com/izforge/izpack/gui%20src/tests/com/izforge/izpack&In-Reply-To="
       TITLE="[izpack-changes] r1509 - in izpack-src/trunk: . src/dist-files	src/lib/com/izforge/izpack/gui src/tests/com/izforge/izpack">noreply at berlios.de
       </A><BR>
    <I>Sun Jul 30 06:16:44 CEST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="000252.html">[izpack-changes] r1508 - izpack-src/trunk/src/doc-ng/XHTML
</A></li>
        
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#253">[ date ]</a>
              <a href="thread.html#253">[ thread ]</a>
              <a href="subject.html#253">[ subject ]</a>
              <a href="author.html#253">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: jponge
Date: 2006-07-30 06:16:20 +0200 (Sun, 30 Jul 2006)
New Revision: 1509

Added:
   izpack-src/trunk/src/tests/com/izforge/izpack/TwoColumnLayoutTest.java
Modified:
   izpack-src/trunk/IzPack-head.iml
   izpack-src/trunk/IzPack-head.ipr
   izpack-src/trunk/Thanks.txt
   izpack-src/trunk/Versions.txt
   izpack-src/trunk/src/dist-files/IzPack-install-reg.xml
   izpack-src/trunk/src/dist-files/IzPack-install.xml
   izpack-src/trunk/src/lib/com/izforge/izpack/gui/TwoColumnLayout.java
Log:
TwoColumnLayout fix (Amit Bhayani @JBoss/RedHat)

Modified: izpack-src/trunk/IzPack-head.iml
===================================================================
--- izpack-src/trunk/IzPack-head.iml	2006-07-25 14:26:28 UTC (rev 1508)
+++ izpack-src/trunk/IzPack-head.iml	2006-07-30 04:16:20 UTC (rev 1509)
@@ -6,7 +6,7 @@
     &lt;exclude-output /&gt;
     &lt;content url=&quot;<A HREF="file://$MODULE_DIR$&quot;">file://$MODULE_DIR$&quot;</A>&gt;
       &lt;sourceFolder url=&quot;<A HREF="file://$MODULE_DIR$/src/lib&quot;">file://$MODULE_DIR$/src/lib&quot;</A> isTestSource=&quot;false&quot; /&gt;
-      &lt;sourceFolder url=&quot;<A HREF="file://$MODULE_DIR$/src/tests&quot;">file://$MODULE_DIR$/src/tests&quot;</A> isTestSource=&quot;false&quot; /&gt;
+      &lt;sourceFolder url=&quot;<A HREF="file://$MODULE_DIR$/src/tests&quot;">file://$MODULE_DIR$/src/tests&quot;</A> isTestSource=&quot;true&quot; /&gt;
     &lt;/content&gt;
     &lt;orderEntry type=&quot;inheritedJdk&quot; /&gt;
     &lt;orderEntry type=&quot;sourceFolder&quot; forTests=&quot;false&quot; /&gt;
@@ -28,7 +28,7 @@
         &lt;SOURCES /&gt;
       &lt;/library&gt;
     &lt;/orderEntry&gt;
-    &lt;orderEntry type=&quot;library&quot; name=&quot;Junit&quot; level=&quot;application&quot; /&gt;
+    &lt;orderEntry type=&quot;library&quot; name=&quot;JUnit&quot; level=&quot;application&quot; /&gt;
     &lt;orderEntryProperties /&gt;
   &lt;/component&gt;
 &lt;/module&gt;

Modified: izpack-src/trunk/IzPack-head.ipr
===================================================================
--- izpack-src/trunk/IzPack-head.ipr	2006-07-25 14:26:28 UTC (rev 1508)
+++ izpack-src/trunk/IzPack-head.ipr	2006-07-30 04:16:20 UTC (rev 1509)
@@ -188,7 +188,7 @@
       &lt;module fileurl=&quot;<A HREF="file://$PROJECT_DIR$/IzPack-head.iml&quot;">file://$PROJECT_DIR$/IzPack-head.iml&quot;</A> filepath=&quot;$PROJECT_DIR$/IzPack-head.iml&quot; /&gt;
     &lt;/modules&gt;
   &lt;/component&gt;
-  &lt;component name=&quot;ProjectRootManager&quot; version=&quot;2&quot; assert-keyword=&quot;true&quot; jdk-15=&quot;false&quot; project-jdk-name=&quot;1.5.0_05&quot; /&gt;
+  &lt;component name=&quot;ProjectRootManager&quot; version=&quot;2&quot; assert-keyword=&quot;true&quot; jdk-15=&quot;false&quot; project-jdk-name=&quot;1.5&quot; /&gt;
   &lt;component name=&quot;RmicSettings&quot;&gt;
     &lt;option name=&quot;IS_EANABLED&quot; value=&quot;false&quot; /&gt;
     &lt;option name=&quot;DEBUGGING_INFO&quot; value=&quot;true&quot; /&gt;

Modified: izpack-src/trunk/Thanks.txt
===================================================================
--- izpack-src/trunk/Thanks.txt	2006-07-25 14:26:28 UTC (rev 1508)
+++ izpack-src/trunk/Thanks.txt	2006-07-30 04:16:20 UTC (rev 1509)
@@ -105,4 +105,5 @@
 - Hal Vaughan: for the patches
 - Eric Rose: for the patch related to the logfile of AntActions.
 - Ryan Shillington: for the patches
+- Amit Bhayani &amp; JBoss: for the patches
 

Modified: izpack-src/trunk/Versions.txt
===================================================================
--- izpack-src/trunk/Versions.txt	2006-07-25 14:26:28 UTC (rev 1508)
+++ izpack-src/trunk/Versions.txt	2006-07-30 04:16:20 UTC (rev 1509)
@@ -30,7 +30,8 @@
 - MAC OS: Launcher is built as universal (ie, i386/ppc) binary  (Julien Ponge)
 - MAC OS: Qt is embedded in the application bundle  (Julien Ponge)
 - Added a variable for install log, InstallerFrame.logfilePath (Klaus Bartz)
-- Added the docu for install log (Fabrice Mirabile)
+- Added the docu for install log (Fabrice Mirabile).
+- TwoColumnLayout fix (Amit Bhayani @JBoss/RedHat).
 
   &gt; 3.8.1 (build 2006.01.06)
 - Added Greek language support (Fabrice Mirabile, thanks to Panayotis

Modified: izpack-src/trunk/src/dist-files/IzPack-install-reg.xml
===================================================================
--- izpack-src/trunk/src/dist-files/IzPack-install-reg.xml	2006-07-25 14:26:28 UTC (rev 1508)
+++ izpack-src/trunk/src/dist-files/IzPack-install-reg.xml	2006-07-30 04:16:20 UTC (rev 1509)
@@ -29,10 +29,13 @@
 
             &lt;author email=&quot;&quot; name=&quot;Klaus Bartz (developer)&quot;/&gt;
             &lt;author email=&quot;&quot; name=&quot;Fabrice Mirabile (developer)&quot;/&gt;
+            &lt;author email=&quot;&quot; name=&quot;Marc Eppelmann (developer)&quot; /&gt;
 
             &lt;author email=&quot;&quot; name=&quot;Oliver Kiddle (contributor)&quot;/&gt;
             &lt;author email=&quot;&quot; name=&quot;Cesar Martinez Izquierdo (contributor)&quot;/&gt;
-            &lt;author email=&quot;&quot; name=&quot;(Ryan Shillington&quot; /&gt;
+            &lt;author email=&quot;&quot; name=&quot;Ryan Shillington (contributor)&quot; /&gt;
+            &lt;author email=&quot;&quot; name=&quot;Eric Rose (contributor)&quot; /&gt;
+            &lt;author email=&quot;&quot; name=&quot;Amit Bhayani @JBoss/RedHat (contributors)&quot; /&gt;
 
             &lt;author email=&quot;&quot;
                 name=&quot;... the many other developers and contributors to the previous releases (see Thanks.txt)&quot; /&gt;

Modified: izpack-src/trunk/src/dist-files/IzPack-install.xml
===================================================================
--- izpack-src/trunk/src/dist-files/IzPack-install.xml	2006-07-25 14:26:28 UTC (rev 1508)
+++ izpack-src/trunk/src/dist-files/IzPack-install.xml	2006-07-30 04:16:20 UTC (rev 1509)
@@ -29,10 +29,13 @@
 
             &lt;author email=&quot;&quot; name=&quot;Klaus Bartz (developer)&quot;/&gt;
             &lt;author email=&quot;&quot; name=&quot;Fabrice Mirabile (developer)&quot;/&gt;
+            &lt;author email=&quot;&quot; name=&quot;Marc Eppelmann (developer)&quot; /&gt;
 
             &lt;author email=&quot;&quot; name=&quot;Oliver Kiddle (contributor)&quot;/&gt;
             &lt;author email=&quot;&quot; name=&quot;Cesar Martinez Izquierdo (contributor)&quot;/&gt;
-            &lt;author email=&quot;&quot; name=&quot;(Ryan Shillington&quot; /&gt;
+            &lt;author email=&quot;&quot; name=&quot;Ryan Shillington (contributor)&quot; /&gt;
+            &lt;author email=&quot;&quot; name=&quot;Eric Rose (contributor)&quot; /&gt;
+            &lt;author email=&quot;&quot; name=&quot;Amit Bhayani @JBoss/RedHat (contributors)&quot; /&gt;
 
             &lt;author email=&quot;&quot;
                     name=&quot;... the many other developers and contributors to the previous releases (see Thanks.txt)&quot;/&gt;

Modified: izpack-src/trunk/src/lib/com/izforge/izpack/gui/TwoColumnLayout.java
===================================================================
--- izpack-src/trunk/src/lib/com/izforge/izpack/gui/TwoColumnLayout.java	2006-07-25 14:26:28 UTC (rev 1508)
+++ izpack-src/trunk/src/lib/com/izforge/izpack/gui/TwoColumnLayout.java	2006-07-30 04:16:20 UTC (rev 1509)
@@ -21,14 +21,7 @@
 
 package com.izforge.izpack.gui;
 
-import java.awt.BasicStroke;
-import java.awt.Color;
-import java.awt.Component;
-import java.awt.Container;
-import java.awt.Dimension;
-import java.awt.Graphics2D;
-import java.awt.LayoutManager2;
-import java.awt.Stroke;
+import java.awt.*;
 import java.util.Vector;
 
 /**
@@ -875,12 +868,52 @@
     }
 
     /**
-     * This functionality is not supported
+     * This functionality removes the TwoColumnConstraints from Vectors
+     * so that alignment of components on UserInputPanel doesn't get
+     * dirty
      * 
      * @param comp the component to be removed
      */
     public void removeLayoutComponent(Component comp)
     {
+        Vector left = components[LEFT];
+        Vector right = components[RIGHT];
+
+        for (int i = 0; i &lt; left.size(); i++)
+        {
+            TwoColumnConstraints constraints = (TwoColumnConstraints) left.get(i);
+            if (constraints == null)
+            {
+                continue;
+            }
+            Component ctemp = constraints.component;
+            if (ctemp != null &amp;&amp; ctemp.equals(comp))
+            {
+                if (constraints.position == TwoColumnConstraints.BOTH || constraints.position == TwoColumnConstraints.WESTONLY)
+                {
+                    right.remove(i);
+                }
+                break;
+            }
+        }
+
+        for (int j = 0; j &lt; right.size(); j++)
+        {
+            TwoColumnConstraints constraints = (TwoColumnConstraints) right.get(j);
+            if (constraints == null)
+            {
+                continue;
+            }
+            Component ctemp = constraints.component;
+            if (ctemp != null &amp;&amp; ctemp.equals(comp))
+            {
+                if (constraints.position == TwoColumnConstraints.BOTH || constraints.position == TwoColumnConstraints.EASTONLY)
+                {
+                    left.remove(j);
+                }
+                break;
+            }
+        }
     }
 
     /**

Added: izpack-src/trunk/src/tests/com/izforge/izpack/TwoColumnLayoutTest.java
===================================================================
--- izpack-src/trunk/src/tests/com/izforge/izpack/TwoColumnLayoutTest.java	2006-07-25 14:26:28 UTC (rev 1508)
+++ izpack-src/trunk/src/tests/com/izforge/izpack/TwoColumnLayoutTest.java	2006-07-30 04:16:20 UTC (rev 1509)
@@ -0,0 +1,160 @@
+/*
+ * IzPack - Copyright 2001-2006 Julien Ponge, All Rights Reserved.
+ *
+ * <A HREF="http://www.izforge.com/izpack/">http://www.izforge.com/izpack/</A>
+ * <A HREF="http://developer.berlios.de/projects/izpack/">http://developer.berlios.de/projects/izpack/</A>
+ *
+ * Copyright 2006 Amit Bhayani / JBoss
+ *
+ * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
+ * you may not use this file except in compliance with the License.
+ * You may obtain a copy of the License at
+ *
+ *     <A HREF="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</A>
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+
+package com.izforge.izpack;
+
+/**
+ * TwoColumnLayoutTest.java is a 1.4 application that 
+ * demonstrates the use of JButton, JTextField and
+ * JLabel.  It requires no other files.
+ * @author abhayani Amit Bhayani
+ */
+
+import com.izforge.izpack.gui.TwoColumnConstraints;
+import com.izforge.izpack.gui.TwoColumnLayout;
+
+import javax.swing.*;
+import java.awt.*;
+import java.awt.event.ActionEvent;
+import java.awt.event.ActionListener;
+
+public class TwoColumnLayoutTest implements ActionListener
+{
+    JFrame converterFrame;
+    JPanel converterPanel;
+    JTextField tempText;
+    JLabel label;
+    JButton addRow;
+    JButton removeRow;
+
+    boolean removed = false;
+
+    public TwoColumnLayoutTest()
+    {
+        //Create and set up the window.
+        converterFrame = new JFrame(&quot;TwoColumnLayoutTest&quot;);
+        converterFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
+        converterFrame.setSize(new Dimension(240, 80));
+
+        TwoColumnLayout layout = new TwoColumnLayout(10, 5, 30, 25, TwoColumnLayout.LEFT);
+
+        //Create and set up the panel.
+        converterPanel = new JPanel();
+        converterPanel.setLayout(layout);
+
+        //Add the widgets.
+        addWidgets();
+
+        //Set the default button.
+        converterFrame.getRootPane().setDefaultButton(addRow);
+
+        //Add the panel to the window.
+        converterFrame.getContentPane().add(converterPanel, BorderLayout.CENTER);
+
+        //Display the window.
+        converterFrame.pack();
+        converterFrame.setVisible(true);
+    }
+
+    /**
+     * Create and add the widgets.
+     */
+    private void addWidgets()
+    {
+        //Create widgets.
+        tempText = new JTextField(&quot;10&quot;, 30);
+        TwoColumnConstraints constraints = new TwoColumnConstraints();
+        constraints.position = TwoColumnConstraints.EAST;
+
+        label = new JLabel(&quot;Label : &quot;);
+        TwoColumnConstraints constraints1 = new TwoColumnConstraints();
+        constraints1.position = TwoColumnConstraints.WEST;
+
+        addRow = new JButton(&quot;Add Row&quot;);
+        TwoColumnConstraints constraints2 = new TwoColumnConstraints();
+        constraints2.position = TwoColumnConstraints.BOTH;
+
+        //Listen to events from the Convert button.
+        addRow.addActionListener(this);
+
+        //Add the widgets to the container.
+        converterPanel.add(tempText, constraints);
+        converterPanel.add(label, constraints1);
+        converterPanel.add(addRow, constraints2);
+
+
+        label.setBorder(BorderFactory.createEmptyBorder(5, 5, 5, 5));
+
+    }
+
+    public void actionPerformed(ActionEvent event)
+    {
+
+        if (!removed)
+        {
+
+            converterPanel.remove(tempText);
+            converterPanel.remove(label);
+            removed = true;
+
+        }
+        else
+        {
+            TwoColumnConstraints constraints = new TwoColumnConstraints();
+            constraints.position = TwoColumnConstraints.EAST;
+            converterPanel.add(tempText, constraints);
+
+            TwoColumnConstraints constraints1 = new TwoColumnConstraints();
+            constraints1.position = TwoColumnConstraints.WEST;
+            converterPanel.add(label, constraints1);
+            removed = false;
+
+        }
+        converterPanel.repaint();
+
+    }
+
+    /**
+     * Create the GUI and show it.  For thread safety,
+     * this method should be invoked from the
+     * event-dispatching thread.
+     */
+    private static void createAndShowGUI()
+    {
+        //Make sure we have nice window decorations.
+        JFrame.setDefaultLookAndFeelDecorated(true);
+
+        TwoColumnLayoutTest converter = new TwoColumnLayoutTest();
+    }
+
+    public static void main(String[] args)
+    {
+        //Schedule a job for the event-dispatching thread:
+        //creating and showing this application's GUI.
+        javax.swing.SwingUtilities.invokeLater(new Runnable()
+        {
+            public void run()
+            {
+                createAndShowGUI();
+            }
+        });
+    }
+}


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000252.html">[izpack-changes] r1508 - izpack-src/trunk/src/doc-ng/XHTML
</A></li>
	
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#253">[ date ]</a>
              <a href="thread.html#253">[ thread ]</a>
              <a href="subject.html#253">[ subject ]</a>
              <a href="author.html#253">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/izpack-changes">More information about the izpack-changes
mailing list</a><br>
</body></html>
